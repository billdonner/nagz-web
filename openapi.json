{
  "openapi": "3.1.0",
  "info": {
    "title": "Nagz API",
    "description": "Family-oriented AI-mediated nagging system",
    "version": "0.2.0"
  },
  "paths": {
    "/api/v1/version": {
      "get": {
        "tags": [
          "version"
        ],
        "summary": "Get Version",
        "description": "GET /version \u2014 returns server, API, and minimum client versions. No auth required.",
        "operationId": "get_version_api_v1_version_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VersionResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/signup": {
      "post": {
        "tags": [
          "auth"
        ],
        "summary": "Signup",
        "operationId": "signup_api_v1_auth_signup_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SignupRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/login": {
      "post": {
        "tags": [
          "auth"
        ],
        "summary": "Login",
        "operationId": "login_api_v1_auth_login_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/refresh": {
      "post": {
        "tags": [
          "auth"
        ],
        "summary": "Refresh",
        "operationId": "refresh_api_v1_auth_refresh_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RefreshRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/logout": {
      "post": {
        "tags": [
          "auth"
        ],
        "summary": "Logout",
        "operationId": "logout_api_v1_auth_logout_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RefreshRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/preferences": {
      "get": {
        "tags": [
          "preferences"
        ],
        "summary": "Get Preferences",
        "description": "GET /preferences?family_id={familyId} \u2014 member.",
        "operationId": "get_preferences_api_v1_preferences_get",
        "parameters": [
          {
            "name": "family_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Family Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PreferenceResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "preferences"
        ],
        "summary": "Patch Preferences",
        "description": "PATCH /preferences?family_id={familyId} \u2014 member.",
        "operationId": "patch_preferences_api_v1_preferences_patch",
        "parameters": [
          {
            "name": "family_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Family Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PreferenceUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PreferenceResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/preferences/{user_id}": {
      "get": {
        "tags": [
          "preferences"
        ],
        "summary": "Get Preferences For User",
        "description": "GET /preferences/{user_id}?family_id= \u2014 self or guardian.",
        "operationId": "get_preferences_for_user_api_v1_preferences__user_id__get",
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "User Id"
            }
          },
          {
            "name": "family_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Family Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PreferenceResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "preferences"
        ],
        "summary": "Patch Preferences For User",
        "description": "PATCH /preferences/{user_id}?family_id= \u2014 self or guardian.",
        "operationId": "patch_preferences_for_user_api_v1_preferences__user_id__patch",
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "User Id"
            }
          },
          {
            "name": "family_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Family Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PreferenceUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PreferenceResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/families": {
      "post": {
        "tags": [
          "families"
        ],
        "summary": "Create Family",
        "description": "POST /families \u2014 any authenticated user.",
        "operationId": "create_family_api_v1_families_post",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/FamilyCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FamilyResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/families/{family_id}": {
      "get": {
        "tags": [
          "families"
        ],
        "summary": "Get Family",
        "description": "GET /families/{familyId} \u2014 any family member.",
        "operationId": "get_family_api_v1_families__family_id__get",
        "parameters": [
          {
            "name": "family_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Family Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FamilyResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/families/join": {
      "post": {
        "tags": [
          "families"
        ],
        "summary": "Join Family By Code",
        "description": "POST /families/join \u2014 join a family using only an invite code.",
        "operationId": "join_family_by_code_api_v1_families_join_post",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/JoinRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MemberResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/families/{family_id}/join": {
      "post": {
        "tags": [
          "families"
        ],
        "summary": "Join Family",
        "description": "POST /families/{familyId}/join \u2014 member invite flow (legacy).",
        "operationId": "join_family_api_v1_families__family_id__join_post",
        "parameters": [
          {
            "name": "family_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Family Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/JoinRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MemberResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/families/{family_id}/members": {
      "post": {
        "tags": [
          "families"
        ],
        "summary": "Add Member",
        "description": "POST /families/{familyId}/members \u2014 guardian_only.",
        "operationId": "add_member_api_v1_families__family_id__members_post",
        "parameters": [
          {
            "name": "family_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Family Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MemberAdd"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MemberResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "families"
        ],
        "summary": "List Members",
        "description": "GET /families/{familyId}/members \u2014 any family member.",
        "operationId": "list_members_api_v1_families__family_id__members_get",
        "parameters": [
          {
            "name": "family_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Family Id"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 200,
              "minimum": 1,
              "default": 50,
              "title": "Limit"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0,
              "title": "Offset"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaginatedResponse_MemberDetail_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/families/{family_id}/members/create": {
      "post": {
        "tags": [
          "families"
        ],
        "summary": "Create And Add Member",
        "description": "POST /families/{familyId}/members/create \u2014 guardian_only. Creates a new user and adds them.",
        "operationId": "create_and_add_member_api_v1_families__family_id__members_create_post",
        "parameters": [
          {
            "name": "family_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Family Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MemberCreateAndAdd"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MemberDetail"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/families/{family_id}/members/{user_id}": {
      "delete": {
        "tags": [
          "families"
        ],
        "summary": "Remove Member",
        "description": "DELETE /families/{familyId}/members/{userId} \u2014 guardian_only.",
        "operationId": "remove_member_api_v1_families__family_id__members__user_id__delete",
        "parameters": [
          {
            "name": "family_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Family Id"
            }
          },
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "User Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MemberResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/connections/invite": {
      "post": {
        "tags": [
          "connections"
        ],
        "summary": "Invite Connection",
        "description": "POST /connections/invite \u2014 send connection invite by email.",
        "operationId": "invite_connection_api_v1_connections_invite_post",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ConnectionInvite"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ConnectionResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/connections": {
      "get": {
        "tags": [
          "connections"
        ],
        "summary": "List Connections",
        "description": "GET /connections \u2014 list my connections (optionally filter by status).",
        "operationId": "list_connections_api_v1_connections_get",
        "parameters": [
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "$ref": "#/components/schemas/ConnectionStatus"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Status"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 200,
              "minimum": 1,
              "default": 50,
              "title": "Limit"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0,
              "title": "Offset"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaginatedResponse_ConnectionResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/connections/pending": {
      "get": {
        "tags": [
          "connections"
        ],
        "summary": "List Pending Invites",
        "description": "GET /connections/pending \u2014 invites sent TO me.",
        "operationId": "list_pending_invites_api_v1_connections_pending_get",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 200,
              "minimum": 1,
              "default": 50,
              "title": "Limit"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0,
              "title": "Offset"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaginatedResponse_ConnectionResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/connections/{connection_id}/accept": {
      "post": {
        "tags": [
          "connections"
        ],
        "summary": "Accept Connection",
        "description": "POST /connections/{id}/accept \u2014 accept invite.",
        "operationId": "accept_connection_api_v1_connections__connection_id__accept_post",
        "parameters": [
          {
            "name": "connection_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Connection Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ConnectionResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/connections/{connection_id}/decline": {
      "post": {
        "tags": [
          "connections"
        ],
        "summary": "Decline Connection",
        "description": "POST /connections/{id}/decline \u2014 decline invite.",
        "operationId": "decline_connection_api_v1_connections__connection_id__decline_post",
        "parameters": [
          {
            "name": "connection_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Connection Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ConnectionResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/connections/{connection_id}/revoke": {
      "post": {
        "tags": [
          "connections"
        ],
        "summary": "Revoke Connection",
        "description": "POST /connections/{id}/revoke \u2014 either party revokes.",
        "operationId": "revoke_connection_api_v1_connections__connection_id__revoke_post",
        "parameters": [
          {
            "name": "connection_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Connection Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ConnectionResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/connections/{connection_id}/trust": {
      "patch": {
        "tags": [
          "connections"
        ],
        "summary": "Update Connection Trust",
        "description": "PATCH /connections/{id}/trust \u2014 toggle trusted flag.",
        "operationId": "update_connection_trust_api_v1_connections__connection_id__trust_patch",
        "parameters": [
          {
            "name": "connection_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Connection Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ConnectionTrustUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ConnectionResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/connections/{connection_id}/children": {
      "get": {
        "tags": [
          "connections"
        ],
        "summary": "List Trusted Children",
        "description": "GET /connections/{id}/children \u2014 list naggable children via trusted connection.",
        "operationId": "list_trusted_children_api_v1_connections__connection_id__children_get",
        "parameters": [
          {
            "name": "connection_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Connection Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/TrustedConnectionChild"
                  },
                  "title": "Response List Trusted Children Api V1 Connections  Connection Id  Children Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/nags": {
      "post": {
        "tags": [
          "nags"
        ],
        "summary": "Create Nag",
        "description": "POST /nags \u2014 family or connection context.",
        "operationId": "create_nag_api_v1_nags_post",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/NagCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NagResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "nags"
        ],
        "summary": "List Nags",
        "description": "GET /nags \u2014 optional family_id or connection_id filter.",
        "operationId": "list_nags_api_v1_nags_get",
        "parameters": [
          {
            "name": "family_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "uuid"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Family Id"
            }
          },
          {
            "name": "connection_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "uuid"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Connection Id"
            }
          },
          {
            "name": "state",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "State"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 200,
              "minimum": 1,
              "default": 50,
              "title": "Limit"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0,
              "title": "Offset"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaginatedResponse_NagResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/nags/{nag_id}": {
      "get": {
        "tags": [
          "nags"
        ],
        "summary": "Get Nag",
        "description": "GET /nags/{nagId} \u2014 creator_or_guardian or recipient.",
        "operationId": "get_nag_api_v1_nags__nag_id__get",
        "parameters": [
          {
            "name": "nag_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Nag Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NagResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "nags"
        ],
        "summary": "Update Nag",
        "description": "PATCH /nags/{nagId} \u2014 creator_or_guardian.",
        "operationId": "update_nag_api_v1_nags__nag_id__patch",
        "parameters": [
          {
            "name": "nag_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Nag Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/NagUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NagResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/nags/{nag_id}/status": {
      "post": {
        "tags": [
          "nags"
        ],
        "summary": "Update Nag Status",
        "description": "POST /nags/{nagId}/status \u2014 recipient_only.",
        "operationId": "update_nag_status_api_v1_nags__nag_id__status_post",
        "parameters": [
          {
            "name": "nag_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Nag Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/NagStatusUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NagResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/nags/{nag_id}/excuses": {
      "post": {
        "tags": [
          "nags"
        ],
        "summary": "Submit Excuse",
        "description": "POST /nags/{nagId}/excuses \u2014 recipient_only, requires_consent(ai_mediation).",
        "operationId": "submit_excuse_api_v1_nags__nag_id__excuses_post",
        "parameters": [
          {
            "name": "nag_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Nag Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ExcuseCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ExcuseResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "nags"
        ],
        "summary": "List Excuses",
        "description": "GET /nags/{nagId}/excuses \u2014 creator_or_guardian or recipient.",
        "operationId": "list_excuses_api_v1_nags__nag_id__excuses_get",
        "parameters": [
          {
            "name": "nag_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Nag Id"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 200,
              "minimum": 1,
              "default": 50,
              "title": "Limit"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0,
              "title": "Offset"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaginatedResponse_ExcuseResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/nags/{nag_id}/escalation": {
      "get": {
        "tags": [
          "escalation"
        ],
        "summary": "Get Escalation",
        "description": "GET /nags/{nagId}/escalation \u2014 creator_or_guardian.",
        "operationId": "get_escalation_api_v1_nags__nag_id__escalation_get",
        "parameters": [
          {
            "name": "nag_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Nag Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EscalationResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/nags/{nag_id}/escalation/recompute": {
      "post": {
        "tags": [
          "escalation"
        ],
        "summary": "Recompute Escalation",
        "description": "POST /nags/{nagId}/escalation/recompute \u2014 creator_or_guardian. Delegates to get_escalation.",
        "operationId": "recompute_escalation_api_v1_nags__nag_id__escalation_recompute_post",
        "parameters": [
          {
            "name": "nag_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Nag Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EscalationResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/deliveries": {
      "get": {
        "tags": [
          "deliveries"
        ],
        "summary": "List Deliveries",
        "description": "GET /deliveries?nag_id={nagId} \u2014 creator_or_guardian.",
        "operationId": "list_deliveries_api_v1_deliveries_get",
        "parameters": [
          {
            "name": "nag_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Nag Id"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 200,
              "minimum": 1,
              "default": 50,
              "title": "Limit"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0,
              "title": "Offset"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaginatedResponse_DeliveryResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/policies": {
      "get": {
        "tags": [
          "policies"
        ],
        "summary": "List Policies",
        "description": "GET /policies?family_id={familyId} \u2014 guardian_only.",
        "operationId": "list_policies_api_v1_policies_get",
        "parameters": [
          {
            "name": "family_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Family Id"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 200,
              "minimum": 1,
              "default": 50,
              "title": "Limit"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0,
              "title": "Offset"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaginatedResponse_PolicyResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/policies/{policy_id}": {
      "get": {
        "tags": [
          "policies"
        ],
        "summary": "Get Policy",
        "description": "GET /policies/{policyId} \u2014 guardian_only.",
        "operationId": "get_policy_api_v1_policies__policy_id__get",
        "parameters": [
          {
            "name": "policy_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Policy Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PolicyResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "policies"
        ],
        "summary": "Update Policy",
        "description": "PATCH /policies/{policyId} \u2014 guardian_only.",
        "operationId": "update_policy_api_v1_policies__policy_id__patch",
        "parameters": [
          {
            "name": "policy_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Policy Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PolicyUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PolicyResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/policies/{policy_id}/approvals": {
      "post": {
        "tags": [
          "policies"
        ],
        "summary": "Create Approval",
        "description": "POST /policies/{policyId}/approvals \u2014 guardian_only co-owner.",
        "operationId": "create_approval_api_v1_policies__policy_id__approvals_post",
        "parameters": [
          {
            "name": "policy_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Policy Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ApprovalCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApprovalResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "policies"
        ],
        "summary": "List Approvals",
        "description": "GET /policies/{policyId}/approvals \u2014 guardian_only.",
        "operationId": "list_approvals_api_v1_policies__policy_id__approvals_get",
        "parameters": [
          {
            "name": "policy_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Policy Id"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 200,
              "minimum": 1,
              "default": 50,
              "title": "Limit"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0,
              "title": "Offset"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaginatedResponse_ApprovalResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/incentive-rules": {
      "get": {
        "tags": [
          "incentives"
        ],
        "summary": "List Incentive Rules",
        "description": "GET /incentive-rules?family_id={familyId} \u2014 guardian_only.",
        "operationId": "list_incentive_rules_api_v1_incentive_rules_get",
        "parameters": [
          {
            "name": "family_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Family Id"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 200,
              "minimum": 1,
              "default": 50,
              "title": "Limit"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0,
              "title": "Offset"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaginatedResponse_IncentiveRuleResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "incentives"
        ],
        "summary": "Create Incentive Rule",
        "description": "POST /incentive-rules \u2014 guardian_only.",
        "operationId": "create_incentive_rule_api_v1_incentive_rules_post",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/IncentiveRuleCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/IncentiveRuleResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/incentive-rules/{rule_id}": {
      "patch": {
        "tags": [
          "incentives"
        ],
        "summary": "Update Incentive Rule",
        "description": "PATCH /incentive-rules/{ruleId} \u2014 guardian_only.",
        "operationId": "update_incentive_rule_api_v1_incentive_rules__rule_id__patch",
        "parameters": [
          {
            "name": "rule_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Rule Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/IncentiveRuleUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/IncentiveRuleResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/incentive-events": {
      "get": {
        "tags": [
          "incentives"
        ],
        "summary": "List Incentive Events",
        "description": "GET /incentive-events?nag_id={nagId} \u2014 guardian_only.",
        "operationId": "list_incentive_events_api_v1_incentive_events_get",
        "parameters": [
          {
            "name": "nag_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Nag Id"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 200,
              "minimum": 1,
              "default": 50,
              "title": "Limit"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0,
              "title": "Offset"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaginatedResponse_IncentiveEventResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/gamification/summary": {
      "get": {
        "tags": [
          "gamification"
        ],
        "summary": "Get Summary",
        "description": "GET /gamification/summary?family_id={familyId} \u2014 member, requires gamification_enabled preference.",
        "operationId": "get_summary_api_v1_gamification_summary_get",
        "parameters": [
          {
            "name": "family_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Family Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GamificationSummary"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/gamification/leaderboard": {
      "get": {
        "tags": [
          "gamification"
        ],
        "summary": "Get Leaderboard",
        "description": "GET /gamification/leaderboard?family_id={familyId} \u2014 member, requires gamification_enabled preference.",
        "operationId": "get_leaderboard_api_v1_gamification_leaderboard_get",
        "parameters": [
          {
            "name": "family_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Family Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LeaderboardResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/gamification/events": {
      "get": {
        "tags": [
          "gamification"
        ],
        "summary": "List Events",
        "description": "GET /gamification/events?user_id={userId} \u2014 member, self-or-guardian.",
        "operationId": "list_events_api_v1_gamification_events_get",
        "parameters": [
          {
            "name": "user_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "User Id"
            }
          },
          {
            "name": "family_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "uuid"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Family Id"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 200,
              "minimum": 1,
              "default": 50,
              "title": "Limit"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0,
              "title": "Offset"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaginatedResponse_GamificationEventResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/gamification/badges": {
      "get": {
        "tags": [
          "gamification"
        ],
        "summary": "List Badges",
        "description": "GET /gamification/badges?user_id={userId}&family_id={familyId} \u2014 member.",
        "operationId": "list_badges_api_v1_gamification_badges_get",
        "parameters": [
          {
            "name": "user_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "User Id"
            }
          },
          {
            "name": "family_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Family Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/BadgeResponse"
                  },
                  "title": "Response List Badges Api V1 Gamification Badges Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/abuse-reports": {
      "post": {
        "tags": [
          "safety"
        ],
        "summary": "Create Abuse Report",
        "description": "POST /abuse-reports \u2014 member.",
        "operationId": "create_abuse_report_api_v1_abuse_reports_post",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AbuseReportCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AbuseReportResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/abuse-reports/{report_id}": {
      "get": {
        "tags": [
          "safety"
        ],
        "summary": "Get Abuse Report",
        "description": "GET /abuse-reports/{reportId} \u2014 reporter_or_guardian.",
        "operationId": "get_abuse_report_api_v1_abuse_reports__report_id__get",
        "parameters": [
          {
            "name": "report_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Report Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AbuseReportResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/blocks": {
      "get": {
        "tags": [
          "safety"
        ],
        "summary": "List Blocks",
        "description": "GET /blocks \u2014 list blocks created by the current user.",
        "operationId": "list_blocks_api_v1_blocks_get",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 50,
              "title": "Limit"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Offset"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaginatedResponse_BlockResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "safety"
        ],
        "summary": "Create Block",
        "description": "POST /blocks \u2014 member.",
        "operationId": "create_block_api_v1_blocks_post",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BlockCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BlockResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/blocks/{block_id}": {
      "patch": {
        "tags": [
          "safety"
        ],
        "summary": "Update Block",
        "description": "PATCH /blocks/{blockId} \u2014 member owner.",
        "operationId": "update_block_api_v1_blocks__block_id__patch",
        "parameters": [
          {
            "name": "block_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Block Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BlockUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BlockResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/relationships/{relationship_id}/suspend": {
      "post": {
        "tags": [
          "safety"
        ],
        "summary": "Suspend Relationship",
        "description": "POST /relationships/{relationshipId}/suspend \u2014 party_only.",
        "operationId": "suspend_relationship_api_v1_relationships__relationship_id__suspend_post",
        "parameters": [
          {
            "name": "relationship_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Relationship Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RelationshipResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/consents": {
      "get": {
        "tags": [
          "consents"
        ],
        "summary": "List Consents",
        "description": "GET /consents?family_id={familyId} \u2014 member.",
        "operationId": "list_consents_api_v1_consents_get",
        "parameters": [
          {
            "name": "family_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Family Id"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 200,
              "minimum": 1,
              "default": 50,
              "title": "Limit"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0,
              "title": "Offset"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaginatedResponse_ConsentResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "consents"
        ],
        "summary": "Create Consent",
        "description": "POST /consents \u2014 member or guardian.",
        "operationId": "create_consent_api_v1_consents_post",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ConsentCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ConsentResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/consents/{consent_id}": {
      "patch": {
        "tags": [
          "consents"
        ],
        "summary": "Update Consent",
        "description": "PATCH /consents/{consentId} \u2014 member or guardian.",
        "operationId": "update_consent_api_v1_consents__consent_id__patch",
        "parameters": [
          {
            "name": "consent_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Consent Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ConsentUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ConsentResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/devices": {
      "post": {
        "tags": [
          "devices"
        ],
        "summary": "Register Device",
        "description": "Register a device token for push notifications.",
        "operationId": "register_device_api_v1_devices_post",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DeviceTokenRegister"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DeviceTokenResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "devices"
        ],
        "summary": "List Devices",
        "description": "List the current user's registered device tokens.",
        "operationId": "list_devices_api_v1_devices_get",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 200,
              "minimum": 1,
              "default": 50,
              "title": "Limit"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0,
              "title": "Offset"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaginatedResponse_DeviceTokenResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/devices/{device_id}": {
      "delete": {
        "tags": [
          "devices"
        ],
        "summary": "Unregister Device",
        "description": "Unregister a device token.",
        "operationId": "unregister_device_api_v1_devices__device_id__delete",
        "parameters": [
          {
            "name": "device_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Device Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/accounts": {
      "post": {
        "tags": [
          "accounts"
        ],
        "summary": "Create Account",
        "description": "POST /accounts \u2014 authenticated registration flow.",
        "operationId": "create_account_api_v1_accounts_post",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AccountCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AccountResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/accounts/export": {
      "get": {
        "tags": [
          "accounts"
        ],
        "summary": "Export Account Data",
        "description": "GET /accounts/export \u2014 export all personal data (GDPR/CCPA).",
        "operationId": "export_account_data_api_v1_accounts_export_get",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/accounts/{user_id}": {
      "delete": {
        "tags": [
          "accounts"
        ],
        "summary": "Delete Account",
        "description": "DELETE /accounts/{userId} \u2014 self_or_guardian with policy rules.",
        "operationId": "delete_account_api_v1_accounts__user_id__delete",
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "User Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AccountResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/reports/family/weekly": {
      "get": {
        "tags": [
          "reports"
        ],
        "summary": "Get Weekly Report",
        "description": "GET /reports/family/weekly?family_id={familyId} \u2014 guardian_only.",
        "operationId": "get_weekly_report_api_v1_reports_family_weekly_get",
        "parameters": [
          {
            "name": "family_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Family Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WeeklyReportResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/reports/family/metrics": {
      "get": {
        "tags": [
          "reports"
        ],
        "summary": "Get Family Metrics",
        "description": "GET /reports/family/metrics?family_id={familyId}&from={date}&to={date} \u2014 guardian_only.",
        "operationId": "get_family_metrics_api_v1_reports_family_metrics_get",
        "parameters": [
          {
            "name": "family_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Family Id"
            }
          },
          {
            "name": "from_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date-time"
                },
                {
                  "type": "null"
                }
              ],
              "title": "From Date"
            }
          },
          {
            "name": "to_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date-time"
                },
                {
                  "type": "null"
                }
              ],
              "title": "To Date"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FamilyMetricsResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ai/summarize-excuse": {
      "post": {
        "tags": [
          "ai"
        ],
        "summary": "Summarize Excuse",
        "operationId": "summarize_excuse_api_v1_ai_summarize_excuse_post",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ExcuseSummaryRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ExcuseSummaryResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ai/select-tone": {
      "post": {
        "tags": [
          "ai"
        ],
        "summary": "Select Tone",
        "operationId": "select_tone_api_v1_ai_select_tone_post",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ToneSelectRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ToneSelectResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ai/coaching": {
      "post": {
        "tags": [
          "ai"
        ],
        "summary": "Coaching",
        "operationId": "coaching_api_v1_ai_coaching_post",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CoachingRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CoachingResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ai/patterns": {
      "get": {
        "tags": [
          "ai"
        ],
        "summary": "Patterns",
        "operationId": "patterns_api_v1_ai_patterns_get",
        "parameters": [
          {
            "name": "user_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "User Id"
            }
          },
          {
            "name": "family_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Family Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PatternsResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ai/digest": {
      "get": {
        "tags": [
          "ai"
        ],
        "summary": "Digest",
        "operationId": "digest_api_v1_ai_digest_get",
        "parameters": [
          {
            "name": "family_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Family Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DigestResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ai/predict-completion": {
      "get": {
        "tags": [
          "ai"
        ],
        "summary": "Predict Completion",
        "operationId": "predict_completion_api_v1_ai_predict_completion_get",
        "parameters": [
          {
            "name": "nag_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Nag Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PredictCompletionResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ai/push-back": {
      "post": {
        "tags": [
          "ai"
        ],
        "summary": "Push Back",
        "operationId": "push_back_api_v1_ai_push_back_post",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PushBackRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PushBackResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/sync/events": {
      "get": {
        "tags": [
          "sync"
        ],
        "summary": "Sync Events",
        "description": "Incremental sync endpoint for iOS local event cache.\n\nReturns nags, nag_events, ai_mediation_events, and gamification_events\nthat were created/updated since the given timestamp for the specified family.",
        "operationId": "sync_events_api_v1_sync_events_get",
        "parameters": [
          {
            "name": "family_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Family Id"
            }
          },
          {
            "name": "since",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date-time"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Since"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SyncResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/legal/privacy-policy": {
      "get": {
        "tags": [
          "legal"
        ],
        "summary": "Get Privacy Policy",
        "description": "GET /legal/privacy-policy \u2014 returns the current privacy policy. No auth required.",
        "operationId": "get_privacy_policy_api_v1_legal_privacy_policy_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LegalDocument"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/legal/terms-of-service": {
      "get": {
        "tags": [
          "legal"
        ],
        "summary": "Get Terms Of Service",
        "description": "GET /legal/terms-of-service \u2014 returns the current terms of service. No auth required.",
        "operationId": "get_terms_of_service_api_v1_legal_terms_of_service_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LegalDocument"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/metrics": {
      "get": {
        "tags": [
          "metrics"
        ],
        "summary": "Get Metrics",
        "description": "GET /metrics \u2014 operational metrics for monitoring dashboards. No auth.",
        "operationId": "get_metrics_api_v1_metrics_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MetricsResponse"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "AITone": {
        "type": "string",
        "enum": [
          "neutral",
          "supportive",
          "firm"
        ],
        "title": "AITone"
      },
      "AbuseReportCreate": {
        "properties": {
          "target_id": {
            "type": "string",
            "format": "uuid",
            "title": "Target Id"
          },
          "reason": {
            "type": "string",
            "maxLength": 2000,
            "minLength": 1,
            "title": "Reason"
          }
        },
        "type": "object",
        "required": [
          "target_id",
          "reason"
        ],
        "title": "AbuseReportCreate"
      },
      "AbuseReportResponse": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id"
          },
          "reporter_id": {
            "type": "string",
            "format": "uuid",
            "title": "Reporter Id"
          },
          "target_id": {
            "type": "string",
            "format": "uuid",
            "title": "Target Id"
          },
          "reason": {
            "type": "string",
            "title": "Reason"
          },
          "status": {
            "$ref": "#/components/schemas/AbuseReportStatus"
          }
        },
        "type": "object",
        "required": [
          "id",
          "reporter_id",
          "target_id",
          "reason",
          "status"
        ],
        "title": "AbuseReportResponse"
      },
      "AbuseReportStatus": {
        "type": "string",
        "enum": [
          "open",
          "investigating",
          "resolved",
          "dismissed"
        ],
        "title": "AbuseReportStatus"
      },
      "AccountCreate": {
        "properties": {
          "email": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Email"
          },
          "display_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Display Name"
          },
          "date_of_birth": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Date Of Birth"
          }
        },
        "type": "object",
        "title": "AccountCreate"
      },
      "AccountResponse": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id"
          },
          "email": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Email"
          },
          "display_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Display Name"
          },
          "status": {
            "type": "string",
            "title": "Status"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "email",
          "display_name",
          "status",
          "created_at"
        ],
        "title": "AccountResponse"
      },
      "ApprovalCreate": {
        "properties": {
          "comment": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Comment"
          }
        },
        "type": "object",
        "title": "ApprovalCreate"
      },
      "ApprovalResponse": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id"
          },
          "policy_id": {
            "type": "string",
            "format": "uuid",
            "title": "Policy Id"
          },
          "approver_id": {
            "type": "string",
            "format": "uuid",
            "title": "Approver Id"
          },
          "approved_at": {
            "type": "string",
            "format": "date-time",
            "title": "Approved At"
          },
          "comment": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Comment"
          }
        },
        "type": "object",
        "required": [
          "id",
          "policy_id",
          "approver_id",
          "approved_at",
          "comment"
        ],
        "title": "ApprovalResponse"
      },
      "AuthResponse": {
        "properties": {
          "access_token": {
            "type": "string",
            "title": "Access Token"
          },
          "refresh_token": {
            "type": "string",
            "title": "Refresh Token"
          },
          "token_type": {
            "type": "string",
            "title": "Token Type",
            "default": "bearer"
          },
          "user": {
            "$ref": "#/components/schemas/AccountResponse"
          }
        },
        "type": "object",
        "required": [
          "access_token",
          "refresh_token",
          "user"
        ],
        "title": "AuthResponse"
      },
      "BadgeResponse": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id"
          },
          "user_id": {
            "type": "string",
            "format": "uuid",
            "title": "User Id"
          },
          "family_id": {
            "type": "string",
            "format": "uuid",
            "title": "Family Id"
          },
          "badge_type": {
            "$ref": "#/components/schemas/BadgeType"
          },
          "earned_at": {
            "type": "string",
            "format": "date-time",
            "title": "Earned At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "user_id",
          "family_id",
          "badge_type",
          "earned_at"
        ],
        "title": "BadgeResponse"
      },
      "BadgeType": {
        "type": "string",
        "enum": [
          "first_completion",
          "streak_3",
          "streak_7",
          "streak_30",
          "perfect_week",
          "century_club"
        ],
        "title": "BadgeType"
      },
      "BlockCreate": {
        "properties": {
          "target_id": {
            "type": "string",
            "format": "uuid",
            "title": "Target Id"
          }
        },
        "type": "object",
        "required": [
          "target_id"
        ],
        "title": "BlockCreate"
      },
      "BlockResponse": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id"
          },
          "actor_id": {
            "type": "string",
            "format": "uuid",
            "title": "Actor Id"
          },
          "target_id": {
            "type": "string",
            "format": "uuid",
            "title": "Target Id"
          },
          "state": {
            "$ref": "#/components/schemas/BlockState"
          }
        },
        "type": "object",
        "required": [
          "id",
          "actor_id",
          "target_id",
          "state"
        ],
        "title": "BlockResponse"
      },
      "BlockState": {
        "type": "string",
        "enum": [
          "active",
          "lifted"
        ],
        "title": "BlockState"
      },
      "BlockUpdate": {
        "properties": {
          "state": {
            "$ref": "#/components/schemas/BlockState"
          }
        },
        "type": "object",
        "required": [
          "state"
        ],
        "title": "BlockUpdate"
      },
      "CoachingRequest": {
        "properties": {
          "nag_id": {
            "type": "string",
            "format": "uuid",
            "title": "Nag Id"
          }
        },
        "type": "object",
        "required": [
          "nag_id"
        ],
        "title": "CoachingRequest"
      },
      "CoachingResponse": {
        "properties": {
          "nag_id": {
            "type": "string",
            "format": "uuid",
            "title": "Nag Id"
          },
          "tip": {
            "type": "string",
            "title": "Tip"
          },
          "category": {
            "type": "string",
            "title": "Category"
          },
          "scenario": {
            "type": "string",
            "title": "Scenario"
          }
        },
        "type": "object",
        "required": [
          "nag_id",
          "tip",
          "category",
          "scenario"
        ],
        "title": "CoachingResponse"
      },
      "CompletionFactor": {
        "properties": {
          "name": {
            "type": "string",
            "title": "Name"
          },
          "value": {
            "type": "number",
            "title": "Value"
          }
        },
        "type": "object",
        "required": [
          "name",
          "value"
        ],
        "title": "CompletionFactor"
      },
      "ConnectionInvite": {
        "properties": {
          "invitee_email": {
            "type": "string",
            "format": "email",
            "title": "Invitee Email"
          }
        },
        "type": "object",
        "required": [
          "invitee_email"
        ],
        "title": "ConnectionInvite"
      },
      "ConnectionResponse": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id"
          },
          "inviter_id": {
            "type": "string",
            "format": "uuid",
            "title": "Inviter Id"
          },
          "invitee_id": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "Invitee Id"
          },
          "invitee_email": {
            "type": "string",
            "title": "Invitee Email"
          },
          "status": {
            "$ref": "#/components/schemas/ConnectionStatus"
          },
          "trusted": {
            "type": "boolean",
            "title": "Trusted",
            "default": false
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "responded_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Responded At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "inviter_id",
          "invitee_email",
          "status",
          "created_at"
        ],
        "title": "ConnectionResponse"
      },
      "ConnectionStatus": {
        "type": "string",
        "enum": [
          "pending",
          "active",
          "declined",
          "revoked"
        ],
        "title": "ConnectionStatus"
      },
      "ConnectionTrustUpdate": {
        "properties": {
          "trusted": {
            "type": "boolean",
            "title": "Trusted"
          }
        },
        "type": "object",
        "required": [
          "trusted"
        ],
        "title": "ConnectionTrustUpdate"
      },
      "ConsentCreate": {
        "properties": {
          "family_id": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "Family Id"
          },
          "consent_type": {
            "$ref": "#/components/schemas/ConsentType"
          }
        },
        "type": "object",
        "required": [
          "consent_type"
        ],
        "title": "ConsentCreate"
      },
      "ConsentResponse": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id"
          },
          "user_id": {
            "type": "string",
            "format": "uuid",
            "title": "User Id"
          },
          "family_id_nullable": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "Family Id Nullable"
          },
          "consent_type": {
            "$ref": "#/components/schemas/ConsentType"
          }
        },
        "type": "object",
        "required": [
          "id",
          "user_id",
          "family_id_nullable",
          "consent_type"
        ],
        "title": "ConsentResponse"
      },
      "ConsentType": {
        "type": "string",
        "enum": [
          "child_account_creation",
          "sms_opt_in",
          "ai_mediation",
          "gamification_participation"
        ],
        "title": "ConsentType"
      },
      "ConsentUpdate": {
        "properties": {
          "revoked": {
            "type": "boolean",
            "title": "Revoked",
            "default": false
          }
        },
        "type": "object",
        "title": "ConsentUpdate"
      },
      "DeliveryChannel": {
        "type": "string",
        "enum": [
          "push",
          "sms"
        ],
        "title": "DeliveryChannel"
      },
      "DeliveryResponse": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id"
          },
          "nag_event_id": {
            "type": "string",
            "format": "uuid",
            "title": "Nag Event Id"
          },
          "channel": {
            "$ref": "#/components/schemas/DeliveryChannel"
          },
          "status": {
            "$ref": "#/components/schemas/DeliveryStatus"
          },
          "provider_ref": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Provider Ref"
          }
        },
        "type": "object",
        "required": [
          "id",
          "nag_event_id",
          "channel",
          "status",
          "provider_ref"
        ],
        "title": "DeliveryResponse"
      },
      "DeliveryStatus": {
        "type": "string",
        "enum": [
          "pending",
          "sent",
          "delivered",
          "failed"
        ],
        "title": "DeliveryStatus"
      },
      "DevicePlatform": {
        "type": "string",
        "enum": [
          "ios",
          "ipados",
          "macos"
        ],
        "title": "DevicePlatform"
      },
      "DeviceTokenRegister": {
        "properties": {
          "platform": {
            "$ref": "#/components/schemas/DevicePlatform"
          },
          "token": {
            "type": "string",
            "maxLength": 512,
            "minLength": 1,
            "title": "Token"
          }
        },
        "type": "object",
        "required": [
          "platform",
          "token"
        ],
        "title": "DeviceTokenRegister"
      },
      "DeviceTokenResponse": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id"
          },
          "user_id": {
            "type": "string",
            "format": "uuid",
            "title": "User Id"
          },
          "platform": {
            "$ref": "#/components/schemas/DevicePlatform"
          },
          "token": {
            "type": "string",
            "title": "Token"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "last_used_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Used At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "user_id",
          "platform",
          "token",
          "created_at",
          "last_used_at"
        ],
        "title": "DeviceTokenResponse"
      },
      "DigestResponse": {
        "properties": {
          "family_id": {
            "type": "string",
            "format": "uuid",
            "title": "Family Id"
          },
          "period_start": {
            "type": "string",
            "format": "date-time",
            "title": "Period Start"
          },
          "period_end": {
            "type": "string",
            "format": "date-time",
            "title": "Period End"
          },
          "summary_text": {
            "type": "string",
            "title": "Summary Text"
          },
          "member_summaries": {
            "items": {
              "$ref": "#/components/schemas/MemberSummary"
            },
            "type": "array",
            "title": "Member Summaries"
          },
          "totals": {
            "$ref": "#/components/schemas/DigestTotals"
          }
        },
        "type": "object",
        "required": [
          "family_id",
          "period_start",
          "period_end",
          "summary_text",
          "member_summaries",
          "totals"
        ],
        "title": "DigestResponse"
      },
      "DigestTotals": {
        "properties": {
          "total_nags": {
            "type": "integer",
            "title": "Total Nags"
          },
          "completed": {
            "type": "integer",
            "title": "Completed"
          },
          "missed": {
            "type": "integer",
            "title": "Missed"
          },
          "open": {
            "type": "integer",
            "title": "Open"
          },
          "completion_rate": {
            "type": "number",
            "title": "Completion Rate"
          }
        },
        "type": "object",
        "required": [
          "total_nags",
          "completed",
          "missed",
          "open",
          "completion_rate"
        ],
        "title": "DigestTotals"
      },
      "DoneDefinition": {
        "type": "string",
        "enum": [
          "ack_only",
          "binary_check",
          "binary_with_note"
        ],
        "title": "DoneDefinition"
      },
      "EscalationPhase": {
        "type": "string",
        "enum": [
          "phase_0_initial",
          "phase_1_due_soon",
          "phase_2_overdue_soft",
          "phase_3_overdue_bounded_pushback",
          "phase_4_guardian_review"
        ],
        "title": "EscalationPhase"
      },
      "EscalationResponse": {
        "properties": {
          "nag_id": {
            "type": "string",
            "format": "uuid",
            "title": "Nag Id"
          },
          "current_phase": {
            "$ref": "#/components/schemas/EscalationPhase"
          },
          "due_at": {
            "type": "string",
            "format": "date-time",
            "title": "Due At"
          },
          "computed_at": {
            "type": "string",
            "format": "date-time",
            "title": "Computed At"
          }
        },
        "type": "object",
        "required": [
          "nag_id",
          "current_phase",
          "due_at",
          "computed_at"
        ],
        "title": "EscalationResponse"
      },
      "ExcuseCategory": {
        "type": "string",
        "enum": [
          "forgot",
          "time_conflict",
          "unclear_instructions",
          "lacking_resources",
          "refused",
          "other"
        ],
        "title": "ExcuseCategory"
      },
      "ExcuseCreate": {
        "properties": {
          "text": {
            "type": "string",
            "maxLength": 2000,
            "minLength": 1,
            "title": "Text"
          },
          "category": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Category"
          }
        },
        "type": "object",
        "required": [
          "text"
        ],
        "title": "ExcuseCreate"
      },
      "ExcuseResponse": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id"
          },
          "nag_id": {
            "type": "string",
            "format": "uuid",
            "title": "Nag Id"
          },
          "summary": {
            "type": "string",
            "title": "Summary"
          },
          "at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "nag_id",
          "summary"
        ],
        "title": "ExcuseResponse"
      },
      "ExcuseSummaryRequest": {
        "properties": {
          "text": {
            "type": "string",
            "maxLength": 2000,
            "minLength": 1,
            "title": "Text"
          },
          "nag_id": {
            "type": "string",
            "format": "uuid",
            "title": "Nag Id"
          }
        },
        "type": "object",
        "required": [
          "text",
          "nag_id"
        ],
        "title": "ExcuseSummaryRequest"
      },
      "ExcuseSummaryResponse": {
        "properties": {
          "nag_id": {
            "type": "string",
            "format": "uuid",
            "title": "Nag Id"
          },
          "summary": {
            "type": "string",
            "title": "Summary"
          },
          "category": {
            "$ref": "#/components/schemas/ExcuseCategory"
          },
          "confidence": {
            "type": "number",
            "title": "Confidence"
          }
        },
        "type": "object",
        "required": [
          "nag_id",
          "summary",
          "category",
          "confidence"
        ],
        "title": "ExcuseSummaryResponse"
      },
      "FamilyCreate": {
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 255,
            "minLength": 1,
            "title": "Name"
          }
        },
        "type": "object",
        "required": [
          "name"
        ],
        "title": "FamilyCreate"
      },
      "FamilyMetricsResponse": {
        "properties": {
          "family_id": {
            "type": "string",
            "format": "uuid",
            "title": "Family Id"
          },
          "from_date": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "From Date"
          },
          "to_date": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "To Date"
          },
          "total_nags": {
            "type": "integer",
            "title": "Total Nags"
          },
          "completed": {
            "type": "integer",
            "title": "Completed"
          },
          "missed": {
            "type": "integer",
            "title": "Missed"
          },
          "completion_rate": {
            "type": "number",
            "title": "Completion Rate"
          }
        },
        "type": "object",
        "required": [
          "family_id",
          "from_date",
          "to_date",
          "total_nags",
          "completed",
          "missed",
          "completion_rate"
        ],
        "title": "FamilyMetricsResponse"
      },
      "FamilyResponse": {
        "properties": {
          "family_id": {
            "type": "string",
            "format": "uuid",
            "title": "Family Id"
          },
          "name": {
            "type": "string",
            "title": "Name"
          },
          "invite_code": {
            "type": "string",
            "title": "Invite Code"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "family_id",
          "name",
          "invite_code",
          "created_at"
        ],
        "title": "FamilyResponse"
      },
      "FamilyRole": {
        "type": "string",
        "enum": [
          "guardian",
          "participant",
          "child"
        ],
        "title": "FamilyRole"
      },
      "GamificationEventResponse": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id"
          },
          "family_id": {
            "type": "string",
            "format": "uuid",
            "title": "Family Id"
          },
          "user_id": {
            "type": "string",
            "format": "uuid",
            "title": "User Id"
          },
          "event_type": {
            "type": "string",
            "title": "Event Type"
          },
          "delta_points": {
            "type": "integer",
            "title": "Delta Points"
          },
          "streak_delta": {
            "type": "integer",
            "title": "Streak Delta"
          },
          "at": {
            "type": "string",
            "format": "date-time",
            "title": "At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "family_id",
          "user_id",
          "event_type",
          "delta_points",
          "streak_delta",
          "at"
        ],
        "title": "GamificationEventResponse"
      },
      "GamificationSummary": {
        "properties": {
          "family_id": {
            "type": "string",
            "format": "uuid",
            "title": "Family Id"
          },
          "user_id": {
            "type": "string",
            "format": "uuid",
            "title": "User Id"
          },
          "total_points": {
            "type": "integer",
            "title": "Total Points"
          },
          "current_streak": {
            "type": "integer",
            "title": "Current Streak"
          },
          "event_count": {
            "type": "integer",
            "title": "Event Count"
          }
        },
        "type": "object",
        "required": [
          "family_id",
          "user_id",
          "total_points",
          "current_streak",
          "event_count"
        ],
        "title": "GamificationSummary"
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "IncentiveApprovalMode": {
        "type": "string",
        "enum": [
          "auto",
          "guardian_confirmed"
        ],
        "title": "IncentiveApprovalMode"
      },
      "IncentiveEventResponse": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id"
          },
          "nag_id": {
            "type": "string",
            "format": "uuid",
            "title": "Nag Id"
          },
          "rule_id": {
            "type": "string",
            "format": "uuid",
            "title": "Rule Id"
          },
          "action_type": {
            "type": "string",
            "title": "Action Type"
          },
          "approved_by": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "Approved By"
          },
          "at": {
            "type": "string",
            "format": "date-time",
            "title": "At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "nag_id",
          "rule_id",
          "action_type",
          "approved_by",
          "at"
        ],
        "title": "IncentiveEventResponse"
      },
      "IncentiveRuleCreate": {
        "properties": {
          "family_id": {
            "type": "string",
            "format": "uuid",
            "title": "Family Id"
          },
          "condition": {
            "additionalProperties": true,
            "type": "object",
            "title": "Condition"
          },
          "action": {
            "additionalProperties": true,
            "type": "object",
            "title": "Action"
          },
          "approval_mode": {
            "$ref": "#/components/schemas/IncentiveApprovalMode",
            "default": "auto"
          }
        },
        "type": "object",
        "required": [
          "family_id",
          "condition",
          "action"
        ],
        "title": "IncentiveRuleCreate"
      },
      "IncentiveRuleResponse": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id"
          },
          "family_id": {
            "type": "string",
            "format": "uuid",
            "title": "Family Id"
          },
          "version": {
            "type": "integer",
            "title": "Version"
          },
          "condition": {
            "additionalProperties": true,
            "type": "object",
            "title": "Condition"
          },
          "action": {
            "additionalProperties": true,
            "type": "object",
            "title": "Action"
          },
          "approval_mode": {
            "$ref": "#/components/schemas/IncentiveApprovalMode"
          },
          "status": {
            "type": "string",
            "title": "Status"
          }
        },
        "type": "object",
        "required": [
          "id",
          "family_id",
          "version",
          "condition",
          "action",
          "approval_mode",
          "status"
        ],
        "title": "IncentiveRuleResponse"
      },
      "IncentiveRuleUpdate": {
        "properties": {
          "condition": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Condition"
          },
          "action": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Action"
          },
          "approval_mode": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/IncentiveApprovalMode"
              },
              {
                "type": "null"
              }
            ]
          }
        },
        "type": "object",
        "title": "IncentiveRuleUpdate"
      },
      "InsightItem": {
        "properties": {
          "day_of_week": {
            "type": "string",
            "title": "Day Of Week"
          },
          "miss_count": {
            "type": "integer",
            "title": "Miss Count"
          }
        },
        "type": "object",
        "required": [
          "day_of_week",
          "miss_count"
        ],
        "title": "InsightItem"
      },
      "JoinRequest": {
        "properties": {
          "invite_code": {
            "type": "string",
            "title": "Invite Code"
          }
        },
        "type": "object",
        "required": [
          "invite_code"
        ],
        "title": "JoinRequest"
      },
      "LeaderboardEntry": {
        "properties": {
          "user_id": {
            "type": "string",
            "format": "uuid",
            "title": "User Id"
          },
          "total_points": {
            "type": "integer",
            "title": "Total Points"
          }
        },
        "type": "object",
        "required": [
          "user_id",
          "total_points"
        ],
        "title": "LeaderboardEntry"
      },
      "LeaderboardResponse": {
        "properties": {
          "family_id": {
            "type": "string",
            "format": "uuid",
            "title": "Family Id"
          },
          "period_start": {
            "type": "string",
            "title": "Period Start"
          },
          "leaderboard": {
            "items": {
              "$ref": "#/components/schemas/LeaderboardEntry"
            },
            "type": "array",
            "title": "Leaderboard"
          }
        },
        "type": "object",
        "required": [
          "family_id",
          "period_start",
          "leaderboard"
        ],
        "title": "LeaderboardResponse"
      },
      "LegalDocument": {
        "properties": {
          "title": {
            "type": "string",
            "title": "Title"
          },
          "version": {
            "type": "string",
            "title": "Version"
          },
          "effective_date": {
            "type": "string",
            "title": "Effective Date"
          },
          "content": {
            "type": "string",
            "title": "Content"
          }
        },
        "type": "object",
        "required": [
          "title",
          "version",
          "effective_date",
          "content"
        ],
        "title": "LegalDocument"
      },
      "LoginRequest": {
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email"
          },
          "password": {
            "type": "string",
            "minLength": 1,
            "title": "Password"
          }
        },
        "type": "object",
        "required": [
          "email",
          "password"
        ],
        "title": "LoginRequest"
      },
      "MemberAdd": {
        "properties": {
          "user_id": {
            "type": "string",
            "format": "uuid",
            "title": "User Id"
          },
          "role": {
            "$ref": "#/components/schemas/FamilyRole"
          }
        },
        "type": "object",
        "required": [
          "user_id",
          "role"
        ],
        "title": "MemberAdd"
      },
      "MemberCreateAndAdd": {
        "properties": {
          "display_name": {
            "type": "string",
            "maxLength": 255,
            "minLength": 1,
            "title": "Display Name"
          },
          "role": {
            "$ref": "#/components/schemas/FamilyRole"
          }
        },
        "type": "object",
        "required": [
          "display_name",
          "role"
        ],
        "title": "MemberCreateAndAdd"
      },
      "MemberDetail": {
        "properties": {
          "user_id": {
            "type": "string",
            "format": "uuid",
            "title": "User Id"
          },
          "display_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Display Name"
          },
          "family_id": {
            "type": "string",
            "format": "uuid",
            "title": "Family Id"
          },
          "role": {
            "$ref": "#/components/schemas/FamilyRole"
          },
          "status": {
            "$ref": "#/components/schemas/MembershipStatus"
          },
          "joined_at": {
            "type": "string",
            "format": "date-time",
            "title": "Joined At"
          }
        },
        "type": "object",
        "required": [
          "user_id",
          "display_name",
          "family_id",
          "role",
          "status",
          "joined_at"
        ],
        "title": "MemberDetail"
      },
      "MemberResponse": {
        "properties": {
          "user_id": {
            "type": "string",
            "format": "uuid",
            "title": "User Id"
          },
          "family_id": {
            "type": "string",
            "format": "uuid",
            "title": "Family Id"
          },
          "role": {
            "$ref": "#/components/schemas/FamilyRole"
          },
          "status": {
            "$ref": "#/components/schemas/MembershipStatus"
          },
          "joined_at": {
            "type": "string",
            "format": "date-time",
            "title": "Joined At"
          }
        },
        "type": "object",
        "required": [
          "user_id",
          "family_id",
          "role",
          "status",
          "joined_at"
        ],
        "title": "MemberResponse"
      },
      "MemberSummary": {
        "properties": {
          "user_id": {
            "type": "string",
            "format": "uuid",
            "title": "User Id"
          },
          "display_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Display Name"
          },
          "total_nags": {
            "type": "integer",
            "title": "Total Nags"
          },
          "completed": {
            "type": "integer",
            "title": "Completed"
          },
          "missed": {
            "type": "integer",
            "title": "Missed"
          },
          "completion_rate": {
            "type": "number",
            "title": "Completion Rate"
          }
        },
        "type": "object",
        "required": [
          "user_id",
          "display_name",
          "total_nags",
          "completed",
          "missed",
          "completion_rate"
        ],
        "title": "MemberSummary"
      },
      "MembershipStatus": {
        "type": "string",
        "enum": [
          "active",
          "removed"
        ],
        "title": "MembershipStatus"
      },
      "Metric": {
        "properties": {
          "key": {
            "type": "string",
            "title": "Key"
          },
          "label": {
            "type": "string",
            "title": "Label"
          },
          "value": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "integer"
              }
            ],
            "title": "Value"
          },
          "unit": {
            "type": "string",
            "title": "Unit"
          },
          "warn_above": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Warn Above"
          },
          "warn_below": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Warn Below"
          },
          "sparkline_history": {
            "anyOf": [
              {
                "items": {
                  "type": "number"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Sparkline History"
          }
        },
        "type": "object",
        "required": [
          "key",
          "label",
          "value",
          "unit"
        ],
        "title": "Metric"
      },
      "MetricsResponse": {
        "properties": {
          "metrics": {
            "items": {
              "$ref": "#/components/schemas/Metric"
            },
            "type": "array",
            "title": "Metrics"
          }
        },
        "type": "object",
        "required": [
          "metrics"
        ],
        "title": "MetricsResponse"
      },
      "NagCategory": {
        "type": "string",
        "enum": [
          "chores",
          "meds",
          "homework",
          "appointments",
          "other"
        ],
        "title": "NagCategory"
      },
      "NagCreate": {
        "properties": {
          "family_id": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "Family Id"
          },
          "connection_id": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "Connection Id"
          },
          "recipient_id": {
            "type": "string",
            "format": "uuid",
            "title": "Recipient Id"
          },
          "due_at": {
            "type": "string",
            "format": "date-time",
            "title": "Due At"
          },
          "category": {
            "$ref": "#/components/schemas/NagCategory"
          },
          "done_definition": {
            "$ref": "#/components/schemas/DoneDefinition"
          },
          "description": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 2000
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "strategy_template": {
            "$ref": "#/components/schemas/StrategyTemplate",
            "default": "friendly_reminder"
          },
          "policy_id": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "Policy Id"
          },
          "recurrence": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/Recurrence"
              },
              {
                "type": "null"
              }
            ]
          }
        },
        "type": "object",
        "required": [
          "recipient_id",
          "due_at",
          "category",
          "done_definition"
        ],
        "title": "NagCreate"
      },
      "NagResponse": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id"
          },
          "family_id": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "Family Id"
          },
          "connection_id": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "Connection Id"
          },
          "creator_id": {
            "type": "string",
            "format": "uuid",
            "title": "Creator Id"
          },
          "recipient_id": {
            "type": "string",
            "format": "uuid",
            "title": "Recipient Id"
          },
          "due_at": {
            "type": "string",
            "format": "date-time",
            "title": "Due At"
          },
          "category": {
            "$ref": "#/components/schemas/NagCategory"
          },
          "done_definition": {
            "$ref": "#/components/schemas/DoneDefinition"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "strategy_template": {
            "$ref": "#/components/schemas/StrategyTemplate"
          },
          "recurrence": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/Recurrence"
              },
              {
                "type": "null"
              }
            ]
          },
          "parent_nag_id": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "Parent Nag Id"
          },
          "status": {
            "$ref": "#/components/schemas/NagStatus"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "creator_id",
          "recipient_id",
          "due_at",
          "category",
          "done_definition",
          "strategy_template",
          "status",
          "created_at"
        ],
        "title": "NagResponse"
      },
      "NagStatus": {
        "type": "string",
        "enum": [
          "open",
          "completed",
          "missed",
          "cancelled_relationship_change"
        ],
        "title": "NagStatus"
      },
      "NagStatusUpdate": {
        "properties": {
          "status": {
            "$ref": "#/components/schemas/NagStatus"
          },
          "note": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Note"
          }
        },
        "type": "object",
        "required": [
          "status"
        ],
        "title": "NagStatusUpdate"
      },
      "NagUpdate": {
        "properties": {
          "due_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Due At"
          },
          "category": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/NagCategory"
              },
              {
                "type": "null"
              }
            ]
          },
          "done_definition": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/DoneDefinition"
              },
              {
                "type": "null"
              }
            ]
          }
        },
        "type": "object",
        "title": "NagUpdate"
      },
      "PaginatedResponse_ApprovalResponse_": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/ApprovalResponse"
            },
            "type": "array",
            "title": "Items"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          },
          "limit": {
            "type": "integer",
            "title": "Limit"
          },
          "offset": {
            "type": "integer",
            "title": "Offset"
          }
        },
        "type": "object",
        "required": [
          "items",
          "total",
          "limit",
          "offset"
        ],
        "title": "PaginatedResponse[ApprovalResponse]"
      },
      "PaginatedResponse_BlockResponse_": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/BlockResponse"
            },
            "type": "array",
            "title": "Items"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          },
          "limit": {
            "type": "integer",
            "title": "Limit"
          },
          "offset": {
            "type": "integer",
            "title": "Offset"
          }
        },
        "type": "object",
        "required": [
          "items",
          "total",
          "limit",
          "offset"
        ],
        "title": "PaginatedResponse[BlockResponse]"
      },
      "PaginatedResponse_ConnectionResponse_": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/ConnectionResponse"
            },
            "type": "array",
            "title": "Items"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          },
          "limit": {
            "type": "integer",
            "title": "Limit"
          },
          "offset": {
            "type": "integer",
            "title": "Offset"
          }
        },
        "type": "object",
        "required": [
          "items",
          "total",
          "limit",
          "offset"
        ],
        "title": "PaginatedResponse[ConnectionResponse]"
      },
      "PaginatedResponse_ConsentResponse_": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/ConsentResponse"
            },
            "type": "array",
            "title": "Items"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          },
          "limit": {
            "type": "integer",
            "title": "Limit"
          },
          "offset": {
            "type": "integer",
            "title": "Offset"
          }
        },
        "type": "object",
        "required": [
          "items",
          "total",
          "limit",
          "offset"
        ],
        "title": "PaginatedResponse[ConsentResponse]"
      },
      "PaginatedResponse_DeliveryResponse_": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/DeliveryResponse"
            },
            "type": "array",
            "title": "Items"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          },
          "limit": {
            "type": "integer",
            "title": "Limit"
          },
          "offset": {
            "type": "integer",
            "title": "Offset"
          }
        },
        "type": "object",
        "required": [
          "items",
          "total",
          "limit",
          "offset"
        ],
        "title": "PaginatedResponse[DeliveryResponse]"
      },
      "PaginatedResponse_DeviceTokenResponse_": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/DeviceTokenResponse"
            },
            "type": "array",
            "title": "Items"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          },
          "limit": {
            "type": "integer",
            "title": "Limit"
          },
          "offset": {
            "type": "integer",
            "title": "Offset"
          }
        },
        "type": "object",
        "required": [
          "items",
          "total",
          "limit",
          "offset"
        ],
        "title": "PaginatedResponse[DeviceTokenResponse]"
      },
      "PaginatedResponse_ExcuseResponse_": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/ExcuseResponse"
            },
            "type": "array",
            "title": "Items"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          },
          "limit": {
            "type": "integer",
            "title": "Limit"
          },
          "offset": {
            "type": "integer",
            "title": "Offset"
          }
        },
        "type": "object",
        "required": [
          "items",
          "total",
          "limit",
          "offset"
        ],
        "title": "PaginatedResponse[ExcuseResponse]"
      },
      "PaginatedResponse_GamificationEventResponse_": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/GamificationEventResponse"
            },
            "type": "array",
            "title": "Items"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          },
          "limit": {
            "type": "integer",
            "title": "Limit"
          },
          "offset": {
            "type": "integer",
            "title": "Offset"
          }
        },
        "type": "object",
        "required": [
          "items",
          "total",
          "limit",
          "offset"
        ],
        "title": "PaginatedResponse[GamificationEventResponse]"
      },
      "PaginatedResponse_IncentiveEventResponse_": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/IncentiveEventResponse"
            },
            "type": "array",
            "title": "Items"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          },
          "limit": {
            "type": "integer",
            "title": "Limit"
          },
          "offset": {
            "type": "integer",
            "title": "Offset"
          }
        },
        "type": "object",
        "required": [
          "items",
          "total",
          "limit",
          "offset"
        ],
        "title": "PaginatedResponse[IncentiveEventResponse]"
      },
      "PaginatedResponse_IncentiveRuleResponse_": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/IncentiveRuleResponse"
            },
            "type": "array",
            "title": "Items"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          },
          "limit": {
            "type": "integer",
            "title": "Limit"
          },
          "offset": {
            "type": "integer",
            "title": "Offset"
          }
        },
        "type": "object",
        "required": [
          "items",
          "total",
          "limit",
          "offset"
        ],
        "title": "PaginatedResponse[IncentiveRuleResponse]"
      },
      "PaginatedResponse_MemberDetail_": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/MemberDetail"
            },
            "type": "array",
            "title": "Items"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          },
          "limit": {
            "type": "integer",
            "title": "Limit"
          },
          "offset": {
            "type": "integer",
            "title": "Offset"
          }
        },
        "type": "object",
        "required": [
          "items",
          "total",
          "limit",
          "offset"
        ],
        "title": "PaginatedResponse[MemberDetail]"
      },
      "PaginatedResponse_NagResponse_": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/NagResponse"
            },
            "type": "array",
            "title": "Items"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          },
          "limit": {
            "type": "integer",
            "title": "Limit"
          },
          "offset": {
            "type": "integer",
            "title": "Offset"
          }
        },
        "type": "object",
        "required": [
          "items",
          "total",
          "limit",
          "offset"
        ],
        "title": "PaginatedResponse[NagResponse]"
      },
      "PaginatedResponse_PolicyResponse_": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/PolicyResponse"
            },
            "type": "array",
            "title": "Items"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          },
          "limit": {
            "type": "integer",
            "title": "Limit"
          },
          "offset": {
            "type": "integer",
            "title": "Offset"
          }
        },
        "type": "object",
        "required": [
          "items",
          "total",
          "limit",
          "offset"
        ],
        "title": "PaginatedResponse[PolicyResponse]"
      },
      "PatternsResponse": {
        "properties": {
          "user_id": {
            "type": "string",
            "format": "uuid",
            "title": "User Id"
          },
          "family_id": {
            "type": "string",
            "format": "uuid",
            "title": "Family Id"
          },
          "insights": {
            "items": {
              "$ref": "#/components/schemas/InsightItem"
            },
            "type": "array",
            "title": "Insights"
          },
          "analyzed_at": {
            "type": "string",
            "format": "date-time",
            "title": "Analyzed At"
          }
        },
        "type": "object",
        "required": [
          "user_id",
          "family_id",
          "insights",
          "analyzed_at"
        ],
        "title": "PatternsResponse"
      },
      "PolicyResponse": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id"
          },
          "family_id": {
            "type": "string",
            "format": "uuid",
            "title": "Family Id"
          },
          "owners": {
            "items": {},
            "type": "array",
            "title": "Owners"
          },
          "strategy_template": {
            "$ref": "#/components/schemas/StrategyTemplate"
          },
          "constraints": {
            "additionalProperties": true,
            "type": "object",
            "title": "Constraints"
          },
          "status": {
            "type": "string",
            "title": "Status"
          }
        },
        "type": "object",
        "required": [
          "id",
          "family_id",
          "owners",
          "strategy_template",
          "constraints",
          "status"
        ],
        "title": "PolicyResponse"
      },
      "PolicyUpdate": {
        "properties": {
          "strategy_template": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/StrategyTemplate"
              },
              {
                "type": "null"
              }
            ]
          },
          "constraints": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Constraints"
          },
          "owners": {
            "anyOf": [
              {
                "items": {
                  "type": "string",
                  "format": "uuid"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Owners"
          }
        },
        "type": "object",
        "title": "PolicyUpdate"
      },
      "PredictCompletionResponse": {
        "properties": {
          "nag_id": {
            "type": "string",
            "format": "uuid",
            "title": "Nag Id"
          },
          "likelihood": {
            "type": "number",
            "title": "Likelihood"
          },
          "suggested_reminder_time": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Suggested Reminder Time"
          },
          "factors": {
            "items": {
              "$ref": "#/components/schemas/CompletionFactor"
            },
            "type": "array",
            "title": "Factors"
          }
        },
        "type": "object",
        "required": [
          "nag_id",
          "likelihood",
          "suggested_reminder_time",
          "factors"
        ],
        "title": "PredictCompletionResponse"
      },
      "PreferenceResponse": {
        "properties": {
          "user_id": {
            "type": "string",
            "format": "uuid",
            "title": "User Id"
          },
          "family_id": {
            "type": "string",
            "format": "uuid",
            "title": "Family Id"
          },
          "schema_version": {
            "type": "integer",
            "title": "Schema Version"
          },
          "prefs_json": {
            "additionalProperties": true,
            "type": "object",
            "title": "Prefs Json"
          },
          "etag": {
            "type": "string",
            "title": "Etag"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "user_id",
          "family_id",
          "schema_version",
          "prefs_json",
          "etag",
          "updated_at"
        ],
        "title": "PreferenceResponse"
      },
      "PreferenceUpdate": {
        "properties": {
          "prefs_json": {
            "additionalProperties": true,
            "type": "object",
            "title": "Prefs Json"
          }
        },
        "type": "object",
        "required": [
          "prefs_json"
        ],
        "title": "PreferenceUpdate"
      },
      "PushBackRequest": {
        "properties": {
          "nag_id": {
            "type": "string",
            "format": "uuid",
            "title": "Nag Id"
          }
        },
        "type": "object",
        "required": [
          "nag_id"
        ],
        "title": "PushBackRequest"
      },
      "PushBackResponse": {
        "properties": {
          "nag_id": {
            "type": "string",
            "format": "uuid",
            "title": "Nag Id"
          },
          "should_push_back": {
            "type": "boolean",
            "title": "Should Push Back"
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message"
          },
          "tone": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/AITone"
              },
              {
                "type": "null"
              }
            ]
          },
          "reason": {
            "type": "string",
            "title": "Reason"
          }
        },
        "type": "object",
        "required": [
          "nag_id",
          "should_push_back",
          "message",
          "tone",
          "reason"
        ],
        "title": "PushBackResponse"
      },
      "Recurrence": {
        "type": "string",
        "enum": [
          "daily",
          "weekly",
          "monthly"
        ],
        "title": "Recurrence"
      },
      "RefreshRequest": {
        "properties": {
          "refresh_token": {
            "type": "string",
            "title": "Refresh Token"
          }
        },
        "type": "object",
        "required": [
          "refresh_token"
        ],
        "title": "RefreshRequest"
      },
      "RelationshipResponse": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id"
          },
          "party_a": {
            "type": "string",
            "format": "uuid",
            "title": "Party A"
          },
          "party_b": {
            "type": "string",
            "format": "uuid",
            "title": "Party B"
          },
          "status": {
            "$ref": "#/components/schemas/RelationshipStatus"
          }
        },
        "type": "object",
        "required": [
          "id",
          "party_a",
          "party_b",
          "status"
        ],
        "title": "RelationshipResponse"
      },
      "RelationshipStatus": {
        "type": "string",
        "enum": [
          "active",
          "suspended",
          "revoked"
        ],
        "title": "RelationshipStatus"
      },
      "SignupRequest": {
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email"
          },
          "password": {
            "type": "string",
            "maxLength": 128,
            "minLength": 8,
            "title": "Password"
          },
          "display_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Display Name"
          },
          "date_of_birth": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Date Of Birth"
          }
        },
        "type": "object",
        "required": [
          "email",
          "password"
        ],
        "title": "SignupRequest"
      },
      "StrategyTemplate": {
        "type": "string",
        "enum": [
          "friendly_reminder"
        ],
        "title": "StrategyTemplate"
      },
      "SyncResponse": {
        "properties": {
          "nags": {
            "items": {
              "$ref": "#/components/schemas/SyncedNag"
            },
            "type": "array",
            "title": "Nags"
          },
          "nag_events": {
            "items": {
              "$ref": "#/components/schemas/SyncedNagEvent"
            },
            "type": "array",
            "title": "Nag Events"
          },
          "ai_mediation_events": {
            "items": {
              "$ref": "#/components/schemas/SyncedAIMediationEvent"
            },
            "type": "array",
            "title": "Ai Mediation Events"
          },
          "gamification_events": {
            "items": {
              "$ref": "#/components/schemas/SyncedGamificationEvent"
            },
            "type": "array",
            "title": "Gamification Events"
          },
          "server_time": {
            "type": "string",
            "format": "date-time",
            "title": "Server Time"
          }
        },
        "type": "object",
        "required": [
          "nags",
          "nag_events",
          "ai_mediation_events",
          "gamification_events",
          "server_time"
        ],
        "title": "SyncResponse"
      },
      "SyncedAIMediationEvent": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id"
          },
          "nag_id": {
            "type": "string",
            "format": "uuid",
            "title": "Nag Id"
          },
          "prompt_type": {
            "type": "string",
            "title": "Prompt Type"
          },
          "tone": {
            "type": "string",
            "title": "Tone"
          },
          "summary": {
            "type": "string",
            "title": "Summary"
          },
          "at": {
            "type": "string",
            "format": "date-time",
            "title": "At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "nag_id",
          "prompt_type",
          "tone",
          "summary",
          "at"
        ],
        "title": "SyncedAIMediationEvent"
      },
      "SyncedGamificationEvent": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id"
          },
          "family_id": {
            "type": "string",
            "format": "uuid",
            "title": "Family Id"
          },
          "user_id": {
            "type": "string",
            "format": "uuid",
            "title": "User Id"
          },
          "event_type": {
            "type": "string",
            "title": "Event Type"
          },
          "delta_points": {
            "type": "integer",
            "title": "Delta Points"
          },
          "streak_delta": {
            "type": "integer",
            "title": "Streak Delta"
          },
          "at": {
            "type": "string",
            "format": "date-time",
            "title": "At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "family_id",
          "user_id",
          "event_type",
          "delta_points",
          "streak_delta",
          "at"
        ],
        "title": "SyncedGamificationEvent"
      },
      "SyncedNag": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id"
          },
          "family_id": {
            "type": "string",
            "format": "uuid",
            "title": "Family Id"
          },
          "creator_id": {
            "type": "string",
            "format": "uuid",
            "title": "Creator Id"
          },
          "recipient_id": {
            "type": "string",
            "format": "uuid",
            "title": "Recipient Id"
          },
          "due_at": {
            "type": "string",
            "format": "date-time",
            "title": "Due At"
          },
          "category": {
            "type": "string",
            "title": "Category"
          },
          "done_definition": {
            "type": "string",
            "title": "Done Definition"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "status": {
            "type": "string",
            "title": "Status"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "family_id",
          "creator_id",
          "recipient_id",
          "due_at",
          "category",
          "done_definition",
          "description",
          "status",
          "created_at"
        ],
        "title": "SyncedNag"
      },
      "SyncedNagEvent": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id"
          },
          "nag_id": {
            "type": "string",
            "format": "uuid",
            "title": "Nag Id"
          },
          "event_type": {
            "type": "string",
            "title": "Event Type"
          },
          "actor_id": {
            "type": "string",
            "format": "uuid",
            "title": "Actor Id"
          },
          "at": {
            "type": "string",
            "format": "date-time",
            "title": "At"
          },
          "payload": {
            "additionalProperties": true,
            "type": "object",
            "title": "Payload"
          }
        },
        "type": "object",
        "required": [
          "id",
          "nag_id",
          "event_type",
          "actor_id",
          "at",
          "payload"
        ],
        "title": "SyncedNagEvent"
      },
      "ToneSelectRequest": {
        "properties": {
          "nag_id": {
            "type": "string",
            "format": "uuid",
            "title": "Nag Id"
          }
        },
        "type": "object",
        "required": [
          "nag_id"
        ],
        "title": "ToneSelectRequest"
      },
      "ToneSelectResponse": {
        "properties": {
          "nag_id": {
            "type": "string",
            "format": "uuid",
            "title": "Nag Id"
          },
          "tone": {
            "$ref": "#/components/schemas/AITone"
          },
          "miss_count_7d": {
            "type": "integer",
            "title": "Miss Count 7D"
          },
          "streak": {
            "type": "integer",
            "title": "Streak"
          },
          "reason": {
            "type": "string",
            "title": "Reason"
          }
        },
        "type": "object",
        "required": [
          "nag_id",
          "tone",
          "miss_count_7d",
          "streak",
          "reason"
        ],
        "title": "ToneSelectResponse"
      },
      "TrustedConnectionChild": {
        "properties": {
          "user_id": {
            "type": "string",
            "format": "uuid",
            "title": "User Id"
          },
          "display_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Display Name"
          },
          "family_id": {
            "type": "string",
            "format": "uuid",
            "title": "Family Id"
          },
          "family_name": {
            "type": "string",
            "title": "Family Name"
          },
          "connection_id": {
            "type": "string",
            "format": "uuid",
            "title": "Connection Id"
          }
        },
        "type": "object",
        "required": [
          "user_id",
          "family_id",
          "family_name",
          "connection_id"
        ],
        "title": "TrustedConnectionChild"
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          },
          "input": {
            "title": "Input"
          },
          "ctx": {
            "type": "object",
            "title": "Context"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      },
      "VersionResponse": {
        "properties": {
          "server_version": {
            "type": "string",
            "title": "Server Version"
          },
          "api_version": {
            "type": "string",
            "title": "Api Version"
          },
          "min_client_version": {
            "type": "string",
            "title": "Min Client Version"
          }
        },
        "type": "object",
        "required": [
          "server_version",
          "api_version",
          "min_client_version"
        ],
        "title": "VersionResponse"
      },
      "WeeklyReportResponse": {
        "properties": {
          "family_id": {
            "type": "string",
            "format": "uuid",
            "title": "Family Id"
          },
          "period_start": {
            "type": "string",
            "format": "date-time",
            "title": "Period Start"
          },
          "metrics": {
            "additionalProperties": true,
            "type": "object",
            "title": "Metrics"
          }
        },
        "type": "object",
        "required": [
          "family_id",
          "period_start",
          "metrics"
        ],
        "title": "WeeklyReportResponse"
      }
    }
  }
}

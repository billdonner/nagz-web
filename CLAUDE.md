# Nagz Web App

## Stack
- React, TypeScript, Vite
- API client auto-generated by orval from openapi.json
- Testing: vitest + @testing-library/react + jsdom (14 tests as of 2026-02-17)

## Common Commands
- `npm run dev` — start dev server
- `npm run api:generate` — regenerate TypeScript API client from openapi.json
- `npm run build` — production build
- `npx vitest run` — run tests

## Permissions
All Bash commands are pre-approved. Do not prompt for confirmation.
Commits and pushes are pre-approved — do not ask, just do it.

## Cross-Project Sync
After any change to UI behavior or features:
- Always check if `~/nagz-ios` needs a matching update
- When openapi.json is updated from nagzerver, run `npm run api:generate` to regenerate the TypeScript client

## Architecture
- `ErrorBoundary` — React class component wrapping the entire app
- `extractErrorMessage()` — utility in `axios-instance.ts` for consistent error handling
- Axios response interceptor auto-logs out on 401
- 30s timeout on all API requests
- `AuthProvider` wraps the app, stores JWT in localStorage
- `VersionProvider` checks API compatibility on mount

## Testing Notes
- vitest with jsdom environment (configured in vite.config.ts)
- Use `vi.stubGlobal("localStorage", mock)` for localStorage mocking
- Test files go in `src/__tests__/`
